<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="harsat">
<title>Simple OSPAR â€¢ harsat</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Simple OSPAR">
<meta property="og:description" content="harsat">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">harsat</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0.1000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/harsat.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Data file management</h6>
    <a class="dropdown-item" href="../articles/file-management.html">File locations</a>
    <a class="dropdown-item" href="../articles/external-file-format.html">External file format</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Examples</h6>
    <a class="dropdown-item" href="../articles/example_external_data.html">External data</a>
    <a class="dropdown-item" href="../articles/example_simple_OSPAR.html">Simple OSPAR</a>
    <a class="dropdown-item" href="../articles/example_HELCOM.html">HELCOM</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/osparcomm/HARSAT/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Simple OSPAR</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/osparcomm/HARSAT/blob/HEAD/vignettes/example_simple_OSPAR.Rmd" class="external-link"><code>vignettes/example_simple_OSPAR.Rmd</code></a></small>
      <div class="d-none name"><code>example_simple_OSPAR.Rmd</code></div>
    </div>

    
    
<p>This is a simple example of using the <code>harsat</code> with
OSPAR.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/osparcomm/HARSAT" class="external-link">harsat</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="read-data-from-ices-extraction">Read data from ICES extraction<a class="anchor" aria-label="anchor" href="#read-data-from-ices-extraction"></a>
</h2>
<p>There are three input data sets: - the contaminant data - the station
dictionary - the quality assurance data (more accurately called a
chemical methods file); note that this will disappear before the first
release of the harsat package</p>
<p>Load the R package <code>here</code>, because we use the working
directory to find the data files. If you use your own data files, you
will need to point to a directory containing a copy.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://here.r-lib.org/" class="external-link">here</a></span><span class="op">)</span></span>
<span><span class="va">working.directory</span> <span class="op">&lt;-</span> <span class="fu">here</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">biota_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_data.html">read_data</a></span><span class="op">(</span></span>
<span>  compartment <span class="op">=</span> <span class="st">"biota"</span>, </span>
<span>  purpose <span class="op">=</span> <span class="st">"OSPAR"</span>,                               </span>
<span>  contaminants <span class="op">=</span> <span class="st">"test_data.csv"</span>, </span>
<span>  stations <span class="op">=</span> <span class="st">"station_dictionary.csv"</span>, </span>
<span>  QA <span class="op">=</span> <span class="st">"quality_assurance.csv"</span>,</span>
<span>  data_dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">working.directory</span>, <span class="st">"data"</span>, <span class="st">"example_simple_OSPAR"</span><span class="op">)</span>,</span>
<span>  data_format <span class="op">=</span> <span class="st">"ICES_old"</span>,</span>
<span>  info_files <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    determinand <span class="op">=</span> <span class="st">"determinand_simple_OSPAR.csv"</span>, </span>
<span>    thresholds <span class="op">=</span> <span class="st">"thresholds_biota_simple_OSPAR.csv"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  info_dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">working.directory</span>, <span class="st">"information"</span><span class="op">)</span>, </span>
<span>  extraction <span class="op">=</span> <span class="st">"2022/01/11"</span>,</span>
<span>  max_year <span class="op">=</span> <span class="fl">2020L</span>  </span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Reading station dictionary from:</span></span>
<span><span class="co">#&gt;  '/Users/stuart/git/HARSAT/data/example_simple_OSPAR/station_dictionary.csv'</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Reading contaminant and biological effects data from:</span></span>
<span><span class="co">#&gt;  '/Users/stuart/git/HARSAT/data/example_simple_OSPAR/test_data.csv'</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Reading QA data from '/Users/stuart/git/HARSAT/data/example_simple_OSPAR/quality_assurance.csv'</span></span></code></pre></div>
<div class="section level3">
<h3 id="prepare-data-for-next-stage">Prepare data for next stage<a class="anchor" aria-label="anchor" href="#prepare-data-for-next-stage"></a>
</h3>
<p>Gets correct variable and streamlines some of the data files</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">biota_data</span> <span class="op">&lt;-</span> <span class="fu">ctsm_tidy_data</span><span class="op">(</span><span class="va">biota_data</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Oddities will be written to 'oddities/biota' with previous oddities backed up to</span></span>
<span><span class="co">#&gt;  'oddities/biota_backup'</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Cleaning station dictionary</span></span>
<span><span class="co">#&gt;    Duplicate stations - first one selected: see duplicate_stations.csv</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Cleaning contaminant and biological effects data</span></span>
<span><span class="co">#&gt;    Submitted.station unrecognised by dictionary: see stations_unrecognised.csv</span></span>
<span><span class="co">#&gt;    Dropping data with no stations</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="construct-timeseries">Construct timeseries<a class="anchor" aria-label="anchor" href="#construct-timeseries"></a>
</h3>
<p>Identifies groups of data that form a coherent timeseries. Also does
a lot of data cleaning and processing (creates oddities folder).</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">biota_timeSeries</span> <span class="op">&lt;-</span> <span class="fu">ctsm_create_timeSeries</span><span class="op">(</span></span>
<span>  <span class="va">biota_data</span>,</span>
<span>  determinands <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CD"</span>, <span class="st">"CB153"</span>, <span class="st">"HBCD"</span>,<span class="st">"HBCDA"</span>, <span class="st">"HBCDG"</span>, <span class="st">"PYR1OH"</span><span class="op">)</span>, </span>
<span>  determinands.control <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    HBCD <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>det <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"HBCDA"</span>, <span class="st">"HBCDB"</span>, <span class="st">"HBCDG"</span><span class="op">)</span>, action <span class="op">=</span> <span class="st">"sum"</span><span class="op">)</span>,</span>
<span>    <span class="st">"LIPIDWT%"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>det <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"EXLIP%"</span>, <span class="st">"FATWT%"</span><span class="op">)</span>, action <span class="op">=</span> <span class="st">"bespoke"</span><span class="op">)</span></span>
<span>  <span class="op">)</span>, </span>
<span>  get_basis <span class="op">=</span> <span class="va">get_basis_biota_OSPAR</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Oddities will be written to 'oddities/biota' with previous oddities backed up to</span></span>
<span><span class="co">#&gt;  'oddities/biota_backup'</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Cleaning data</span></span>
<span><span class="co">#&gt;    Dropping stations with no data between 2015 and 2020 </span></span>
<span><span class="co">#&gt;    Dropping samples with only auxiliary variables</span></span>
<span><span class="co">#&gt;    Unexpected or missing values for 'matrix': see matrix_queries.csv</span></span>
<span><span class="co">#&gt;    Unexpected or missing values for 'basis': see basis_queries.csv</span></span>
<span><span class="co">#&gt;    Bile metabolite units changed from 'ng/g' to 'ng/ml' and from 'ug/kg' to 'ug/l'</span></span>
<span><span class="co">#&gt;    Replicate measurements, only first retained: see replicate_measurements.csv</span></span>
<span><span class="co">#&gt;    Limit of quantification less than limit of detection: see limits_inconsistent.csv</span></span>
<span><span class="co">#&gt;    Detection limit higher than data: see detection_limit_high.csv</span></span>
<span><span class="co">#&gt;    Data submitted as HBCDA, HBCDB, HBCDG summed to give HBCD</span></span>
<span><span class="co">#&gt;    Data submitted as EXLIP% or FATWT% relabelled as LIPIDWT% </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Creating time series data</span></span>
<span><span class="co">#&gt;    Converting data to appropriate basis for statistical analysis</span></span>
<span><span class="co">#&gt;    Losing 32 out of 392 records in basis conversion due to missing, censored</span></span>
<span><span class="co">#&gt;    or zero drywt or lipidwt values.</span></span>
<span><span class="co">#&gt;    Dropping bivalve and gastropod contaminant data collected during the</span></span>
<span><span class="co">#&gt;     spawning season, which is taken to be the following months:</span></span>
<span><span class="co">#&gt;     April, May, June, July </span></span>
<span><span class="co">#&gt;    Dropping groups of compounds / stations with no data between 2015 and 2020</span></span></code></pre></div>
<p>Identical (apart from call) to:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ctsm_create_timeSeries</span><span class="op">(</span></span>
<span>  <span class="va">biota_data</span>,</span>
<span>  determinands <span class="op">=</span> <span class="fu"><a href="../reference/ctsm_get_determinands.html">ctsm_get_determinands</a></span><span class="op">(</span><span class="st">"biota"</span><span class="op">)</span>,</span>
<span>  determinands.control <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    HBCD <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>det <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"HBCDA"</span>, <span class="st">"HBCDB"</span>, <span class="st">"HBCDG"</span><span class="op">)</span>, action <span class="op">=</span> <span class="st">"sum"</span><span class="op">)</span>,</span>
<span>    <span class="st">"LIPIDWT%"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>det <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"EXLIP%"</span>, <span class="st">"FATWT%"</span><span class="op">)</span>, action <span class="op">=</span> <span class="st">"bespoke"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ctsm_create_timeSeries</span><span class="op">(</span></span>
<span>  <span class="va">biota_data</span>,</span>
<span>  determinands.control <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    HBCD <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>det <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"HBCDA"</span>, <span class="st">"HBCDB"</span>, <span class="st">"HBCDG"</span><span class="op">)</span>, action <span class="op">=</span> <span class="st">"sum"</span><span class="op">)</span>,</span>
<span>    <span class="st">"LIPIDWT%"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>det <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"EXLIP%"</span>, <span class="st">"FATWT%"</span><span class="op">)</span>, action <span class="op">=</span> <span class="st">"bespoke"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="assessment">Assessment<a class="anchor" aria-label="anchor" href="#assessment"></a>
</h2>
<p>Do the statistical analysis</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">biota_assessment</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run_assessment.html">run_assessment</a></span><span class="op">(</span></span>
<span>  <span class="va">biota_timeSeries</span>, </span>
<span>  AC <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"BAC"</span>, <span class="st">"EAC"</span>, <span class="st">"EQS"</span>, <span class="st">"HQS"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; assessing series:  station_code 11461; determinand CB153; species Mytilus edulis; matrix SB; basis D; unit ug/kg </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; assessing series:  station_code 11461; determinand CD; species Mytilus edulis; matrix SB; basis D; unit ug/kg </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; assessing series:  station_code 12156; determinand CD; species Crassostrea gigas; matrix SB; basis D; unit ug/kg </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; assessing series:  station_code 12164; determinand CB153; species Crassostrea gigas; matrix SB; basis D; unit ug/kg </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; assessing series:  station_code 12164; determinand CD; species Crassostrea gigas; matrix SB; basis D; unit ug/kg </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; assessing series:  station_code 1235; determinand CB153; species Crassostrea gigas; matrix SB; basis D; unit ug/kg </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; assessing series:  station_code 1235; determinand CD; species Crassostrea gigas; matrix SB; basis D; unit ug/kg</span></span>
<span><span class="co">#&gt; boundary (singular) fit: see help('isSingular')</span></span>
<span><span class="co">#&gt; boundary (singular) fit: see help('isSingular')</span></span>
<span><span class="co">#&gt; boundary (singular) fit: see help('isSingular')</span></span>
<span><span class="co">#&gt; boundary (singular) fit: see help('isSingular')</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; assessing series:  station_code 1235; determinand HBCD; species Crassostrea gigas; matrix SB; basis D; unit ug/kg </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; assessing series:  station_code 1235; determinand HBCDA; species Crassostrea gigas; matrix SB; basis D; unit ug/kg </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; assessing series:  station_code 1235; determinand HBCDG; species Crassostrea gigas; matrix SB; basis D; unit ug/kg </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; assessing series:  station_code 13059; determinand CB153; species Spisula solida; matrix SB; basis D; unit ug/kg </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; assessing series:  station_code 13059; determinand CD; species Spisula solida; matrix SB; basis D; unit ug/kg</span></span>
<span><span class="co">#&gt; boundary (singular) fit: see help('isSingular')</span></span>
<span><span class="co">#&gt; boundary (singular) fit: see help('isSingular')</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; assessing series:  station_code 1345; determinand CB153; species Crassostrea gigas; matrix SB; basis D; unit ug/kg </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; assessing series:  station_code 1345; determinand CD; species Crassostrea gigas; matrix SB; basis D; unit ug/kg</span></span>
<span><span class="co">#&gt; boundary (singular) fit: see help('isSingular')</span></span>
<span><span class="co">#&gt; boundary (singular) fit: see help('isSingular')</span></span>
<span><span class="co">#&gt; boundary (singular) fit: see help('isSingular')</span></span>
<span><span class="co">#&gt; boundary (singular) fit: see help('isSingular')</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; assessing series:  station_code 1345; determinand HBCD; species Crassostrea gigas; matrix SB; basis D; unit ug/kg </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; assessing series:  station_code 1345; determinand HBCDA; species Crassostrea gigas; matrix SB; basis D; unit ug/kg </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; assessing series:  station_code 1345; determinand HBCDG; species Crassostrea gigas; matrix SB; basis D; unit ug/kg </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; assessing series:  station_code 1381; determinand CB153; species Mytilus edulis; matrix SB; basis D; unit ug/kg </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; assessing series:  station_code 1381; determinand CD; species Mytilus edulis; matrix SB; basis D; unit ug/kg </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; assessing series:  station_code 1381; determinand HBCD; species Mytilus edulis; matrix SB; basis D; unit ug/kg </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; assessing series:  station_code 1381; determinand HBCDA; species Mytilus edulis; matrix SB; basis D; unit ug/kg </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; assessing series:  station_code 1381; determinand HBCDG; species Mytilus edulis; matrix SB; basis D; unit ug/kg </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; assessing series:  station_code 1388; determinand CB153; species Crassostrea gigas; matrix SB; basis D; unit ug/kg </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; assessing series:  station_code 1388; determinand CD; species Crassostrea gigas; matrix SB; basis D; unit ug/kg</span></span>
<span><span class="co">#&gt; boundary (singular) fit: see help('isSingular')</span></span>
<span><span class="co">#&gt; boundary (singular) fit: see help('isSingular')</span></span>
<span><span class="co">#&gt; boundary (singular) fit: see help('isSingular')</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; assessing series:  station_code 2717; determinand PYR1OH; species Limanda limanda; matrix BI; method_analysis HPLC-FD; unit ng/ml </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; assessing series:  station_code 3282; determinand CB153; species Crassostrea gigas; matrix SB; basis D; unit ug/kg </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; assessing series:  station_code 3282; determinand CD; species Crassostrea gigas; matrix SB; basis D; unit ug/kg </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; assessing series:  station_code 3433; determinand CB153; species Mytilus edulis; matrix SB; basis D; unit ug/kg </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; assessing series:  station_code 3433; determinand CD; species Mytilus edulis; matrix SB; basis D; unit ug/kg </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; assessing series:  station_code 3441; determinand CB153; species Mytilus edulis; matrix SB; basis D; unit ug/kg </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; assessing series:  station_code 3441; determinand CD; species Mytilus edulis; matrix SB; basis D; unit ug/kg</span></span>
<span><span class="co">#&gt; boundary (singular) fit: see help('isSingular')</span></span>
<span><span class="co">#&gt; boundary (singular) fit: see help('isSingular')</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; assessing series:  station_code 7132; determinand CB153; species Mytilus edulis; matrix SB; basis D; unit ug/kg </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; assessing series:  station_code 7132; determinand CD; species Mytilus edulis; matrix SB; basis D; unit ug/kg</span></span></code></pre></div>
<p>Check convergence - no errors this time</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/check_assessment.html">check_assessment</a></span><span class="op">(</span><span class="va">biota_assessment</span><span class="op">)</span></span>
<span><span class="co">#&gt; All assessment models have converged</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="summary-files">Summary files<a class="anchor" aria-label="anchor" href="#summary-files"></a>
</h2>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">summary.dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">working.directory</span>, <span class="st">"output"</span>, <span class="st">"example_simple_OSPAR"</span><span class="op">)</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.exists</a></span><span class="op">(</span><span class="va">summary.dir</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">summary.dir</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">webGroups</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Metals"</span>, <span class="st">"Metabolites"</span>, <span class="st">"Organobromines"</span>, <span class="st">"Chlorobiphenyls"</span><span class="op">)</span>,  </span>
<span>  labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"Metals"</span>, <span class="st">"PAH metabolites"</span>, <span class="st">"Organobromines"</span>,  <span class="st">"Polychlorinated biphenyls"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">classColour</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  below <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"BAC"</span> <span class="op">=</span> <span class="st">"blue"</span>, </span>
<span>    <span class="st">"EAC"</span> <span class="op">=</span> <span class="st">"green"</span>, </span>
<span>    <span class="st">"EQS"</span> <span class="op">=</span> <span class="st">"green"</span>,</span>
<span>    <span class="st">"HQS"</span> <span class="op">=</span> <span class="st">"green"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  above <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"BAC"</span> <span class="op">=</span> <span class="st">"orange"</span>, </span>
<span>    <span class="st">"EAC"</span> <span class="op">=</span> <span class="st">"red"</span>, </span>
<span>    <span class="st">"EQS"</span> <span class="op">=</span> <span class="st">"red"</span>,</span>
<span>    <span class="st">"HQS"</span> <span class="op">=</span> <span class="st">"red"</span></span>
<span>  <span class="op">)</span>, </span>
<span>  none <span class="op">=</span> <span class="st">"black"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/write_summary_table.html">write_summary_table</a></span><span class="op">(</span></span>
<span>  <span class="va">biota_assessment</span>, </span>
<span>  determinandGroups <span class="op">=</span> <span class="va">webGroups</span>,</span>
<span>  classColour <span class="op">=</span> <span class="va">classColour</span>,</span>
<span>  collapse_AC <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>EAC <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"EAC"</span>, <span class="st">"EQS"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  output_dir <span class="op">=</span> <span class="va">summary.dir</span>, </span>
<span><span class="op">)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Rob Fryer, Leszek Kaliciak, Scottish Government, AmbieSense Ltd, Helsinki Commission (HELCOM), Arctic Monitoring and Assessment Programme (AMAP), OSPAR Commission (OSPAR), International Council for the Exploration of the Sea (ICES).</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
